<!DOCTYPE html>
<html>
<head>
<title>Table</title>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="signup.css">
</head>

<body>


	<script src="react/build/react.js"></script>
	<script src="react/build/react-dom.js"></script>
	<script src="babel/browser.js"></script>
	<script src="jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
	
	
	var xmlHttpRequest = null;
	var console = "";

	function ajaxRequest() {
		if(document.getElementById("name").value==""){
			alert("Name can't be empty");
			return;
		}
		
		if(document.getElementById("password").value==""){
			alert("Password can't be empty");
			return;
		}
		
		if(document.getElementById("password").value!=document.getElementById("password2").value){
			alert("Repeated password fail");
			return;
		}
		if(document.getElementById("phone").value==""){
			alert("Phone can't be empty");
			return;
		}
		if(document.getElementById("email").value==""){
			alert("Email can't be empty");
			return;
		}
				
		if (window.ActiveXObject) {
			xmlHttpRequest = new ActionXObject("Microsoft.XMLHTTP");
		} else if (window.XMLHttpRequest) {
			xmlHttpRequest = new XMLHttpRequest();
		}

		if (xmlHttpRequest != null) {

			var infoMsg = new Object();

				infoMsg.name = document.getElementById("name").value;
				infoMsg.password = document.getElementById("password").value;
				infoMsg.phone = document.getElementById("phone").value;
				infoMsg.email = document.getElementById("email").value;
				
				/* Convert the message to JSON */
				var jsonstr = JSON.stringify(infoMsg);
				
	            
	            xmlHttpRequest.open("POST","/ReactAppDB/SignUp",true);
	            xmlHttpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	            xmlHttpRequest.onreadystatechange = ajaxCall; 
	            xmlHttpRequest.send("content=" + jsonstr);
	            
				console += "Sent: " + jsonstr + "\n";
				document.getElementById("textarea").innerHTML = console; 
			}
		};

		function ajaxCall() {
		
			if (xmlHttpRequest.readyState == 4) {
				if (xmlHttpRequest.status == 200) {
					var text = xmlHttpRequest.responseText;
					console += "Received: " + text + "\n";
					document.getElementById("textarea").innerHTML = console;
					alert(text);
				}
			}
		}
    </script>
    
	<ul>
	<li><a href="http://localhost:8080/ReactAppDB/index.html">主页</a></li>
	<li><a href="http://localhost:8080/ReactAppDB/login.html">登陆</a></li>
	
	</ul>
	
	<div class="center">
	<h1>欢迎来到175书店</h1>
	<h2>Enter your information</h2>
	</div>
		<table>
			<tr>
				<td align="right">Name:</td>
				<td><input type="text" name="name" id="name" size=20 /></td>
			</tr>
			<tr>
				<td align="right">Password:</td>
				<td><input type="password" name="password" id="password" size=20 /></td>
			</tr>
			<tr>
				<td align="right">Repeat Password:</td>
				<td><input type="password" name="password2" id="password2" size=20 /></td>
			</tr>
			<tr>
				<td align="right">Phone:</td>
				<td><input type="text" name="phone" id="phone" size=20 /></td>
			</tr>
			<tr>
				<td align="right">Email:</td>
				<td><input type="email" name="email" id="email"	size=20 /></td>
			</tr>
			<tr>
				<td></td>
				<td><button type="button" onclick="ajaxRequest()">提交注册</button></td>
			</tr>			
		</table>
		<p>
			
		</p>		
		<textarea id="textarea" cols="70" rows="20"></textarea>

 
</body>




</html>


